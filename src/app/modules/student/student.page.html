<ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Student</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-searchbar [(ngModel)]="searchQuery" [debounce]="250" (ionChange)="onInput()" showCancelButton="focus" value=""
      animated>
    </ion-searchbar>
  </ion-toolbar>

</ion-header>

<ion-content fullscreen>
  <ion-grid>
    <div class="action-top">

      <div class="grid-view">
        <ion-chip color="primary">
          <ion-label color="dark">Total Student: {{totalStudent}}</ion-label>
        </ion-chip>
      </div>
      <div class="grid-view">
        <ion-toggle color="success" name="blueberry" [(ngModel)]="gridValue"></ion-toggle>
      </div>
    </div>


  </ion-grid>
  <ion-grid class="padding-top student-info" *ngIf="!gridValue">
    <ion-row class="student">
      <ng-container *ngFor="let std of allStudentInfo">
        <ion-col size="12" size-sm="6" size-md="4" size-lg="4" *ngIf="std && std['Sub-Status']=='In School'">
          <ion-card >
            <div class="img-icon">
              <ion-img src="https://lagracecenter.com/wp-content/uploads/2022/02/Final-with-waves-and-white-border.png">
              </ion-img>
              <div class="bp blood" *ngIf="std.bloodGroup">
                {{std.bloodGroup}}
              </div>
              <div class="bp" *ngIf="std.class">{{std.class}}</div>
              <div class="bp" *ngIf="std['Sub-Status']" [class.out]="std['Sub-Status']=='In Transfer'">
                <span *ngIf="std['Sub-Status']=='In School'"> IN </span>
                <span *ngIf="std['Sub-Status']=='In Transfer'"> OUT </span>
              </div>
            </div>
            <div class="image-conatiner">
              <a [download]="std.Image" [href]="std.Image" [title]="std.StudentName" target="_blank">
                <ion-img *ngIf="std.Image" src="{{std.Image}}"></ion-img>
              </a>
            </div>

            <ion-card-header>
              <ion-card-title *ngIf="std.StudentName">
                <p>{{std.StudentName}}</p>
              </ion-card-title>
              <ion-card-subtitle *ngIf="std.Class">Standard: <b>{{std.class}}</b></ion-card-subtitle>
            </ion-card-header>
            <ion-card-content *ngIf="std">
              <div class="info">
                <ion-icon name="call"></ion-icon> : <b> <a href="tel: {{std.MobileNumber}}">
                    {{std.MobileNumber}}</a>
                </b>
              </div>
              <div class="info">
                <ion-icon name="home"></ion-icon> : <b> {{std.Habitation|titlecase}}</b>
              </div>
              <ion-button class="ion-activatable ripple-parent" expand="full" shape="round" color="primary"
                (click)="showModal(std)">Detail
                <ion-ripple-effect></ion-ripple-effect>
              </ion-button>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ng-container>


    </ion-row>
    <ng-container *ngIf="itemsCount==0">
      <div class="no-item">
        <ion-img
          src="https://cdn.dribbble.com/users/1231865/screenshots/11157048/media/bc9427646c632ded563ee076fdc5dfda.jpg?compress=1&resize=400x300">
        </ion-img>
      </div>
    </ng-container>
  </ion-grid>
  <ion-grid *ngIf="gridValue">
    <ion-list inset="true">
      <ion-list-header>
        <ion-label>Student List</ion-label>
      </ion-list-header>
      <ion-accordion-group multiple>
        <ion-accordion value="{{std[0].class}}" *ngFor="let std of allStudentClassWise ">
          <ion-item slot="header">
            <ion-label>Standard {{std[0].class}}</ion-label>
          </ion-item>
          <ion-list slot="content">
            <ng-container *ngFor="let studenfInfo of std">
              <ion-item-sliding *ngIf=" studenfInfo['Sub-Status']=='In School'">
                <ion-item-options side="start">
                  <ion-item-option (click)="showModal(studenfInfo)">Detail</ion-item-option>
                </ion-item-options>
                <ion-item (click)="showModal(studenfInfo)">
                  <ion-thumbnail slot="start">
                    <img src="{{studenfInfo.Image}}">
                  </ion-thumbnail>
                  <ion-label>{{ studenfInfo.StudentName|titlecase }} </ion-label>
                  <ion-label slot="end">{{ studenfInfo['Sub-Status'] }} </ion-label>
                </ion-item>
                <ion-item-options side="end">
                  <ion-item-option (click)="showModal(studenfInfo)">Detail</ion-item-option>
                </ion-item-options>
              </ion-item-sliding>
            </ng-container>

          </ion-list>
        </ion-accordion>
      </ion-accordion-group>
    </ion-list>
  </ion-grid>
  
</ion-content>