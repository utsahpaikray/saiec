<ion-header translucent>
 <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Student</ion-title>
  </ion-toolbar>
 <ion-toolbar color="primary">
    <ion-searchbar [(ngModel)]="searchQuery" [debounce]="250" (ionChange)="onInput()" showCancelButton="focus" value=""
      animated>
    </ion-searchbar>
  </ion-toolbar>

</ion-header>

<ion-content fullscreen>
  <ion-grid>
    <div class="action-top">
      <div class="grid-view">
        <ion-chip color="warning">
          <ion-label color="dark">Total Student: {{totalStudent}}</ion-label>
        </ion-chip>
      </div>
      <div class="grid-view">
        <ion-toggle color="success" name="blueberry" [(ngModel)]="gridValue">List View</ion-toggle>
      </div>
    </div>


  </ion-grid>
  @if (!gridValue) {
    <ion-grid class="padding-top student-info">
      <ion-row class="student">
        @for (std of allStudentInfo; track std) {
          @if (std && std['Status']==='Active' || std['Status']==='Y') {
            <ion-col size="12" size-sm="6" size-md="4" size-lg="4">
              <ion-card class="glossy">
                <div >
                  <ion-card-header color="primary" class="ion-no-padding">
                    @if (std.StudentName) {
                      <ion-label>{{std.StudentName|titlecase}}</ion-label>
                    }
                  </ion-card-header>
                  <div class="img-icon">
                    <ion-img src="assets/icon/favicon.png">
                    </ion-img>
                    @if (std.bloodGroup) {
                      <div class="bp">
                        {{std.bloodGroup}}
                      </div>
                    }
                    @if (std.class) {
                      <div class="bp">{{std.class}}</div>
                    }
                    @if (std['Sub-Status']) {
                      <div class="bp" [class.out]="std['Sub-Status']==='In Transfer'">
                        @if (std['Sub-Status']==='In School') {
                          <span> IN </span>
                        }
                        @if (std['Sub-Status']==='In Transfer') {
                          <span> OUT </span>
                        }
                      </div>
                    }
                  </div>
                  <div class="image-conatiner">
                    <a [download]="std.Image" [href]="std.Image" [title]="std.StudentName" target="_blank">
                      @if (std.Image) {
                        <ion-img src="{{std.Image}}"></ion-img>
                      }
                    </a>
                  </div>
                  @if (std) {
                    <ion-card-content>
                      <!-- <div class="info">
                      <ion-icon name="call"></ion-icon> : <b> <a href="tel: {{std.MobileNumber}}">
                    {{std.MobileNumber}}</a>
                  </b>
                </div> -->
                <div class="info">
                  <ion-icon name="home"></ion-icon> : <b> {{std.Habitation|titlecase}}</b>
                </div>
                <div class="action">
                  <ion-button class="ion-activatable ripple-parent" shape="round" size="small" color="primary"
                    (click)="showModal(std)">Detail
                    <ion-ripple-effect></ion-ripple-effect>
                  </ion-button>
                  <ion-button class="ion-activatable ripple-parent" shape="round"  size="small" color="primary"
                    (click)="showReport(std)" [class.button-disabled]="std.report!=='Y'">Report
                    <ion-ripple-effect></ion-ripple-effect>
                  </ion-button>
                </div>
              </ion-card-content>
            }
          </div>
        </ion-card>
      </ion-col>
    }
  }
</ion-row>
@if (itemsCount===0) {
  <div class="no-item">
    <ion-img
      src="https://cdn.dribbble.com/users/1231865/screenshots/11157048/media/bc9427646c632ded563ee076fdc5dfda.jpg?compress=1&resize=400x300">
    </ion-img>
  </div>
}
</ion-grid>
}
@if (gridValue) {
  <ion-grid>
    <ion-row class="student">
      <ion-col>
        <ion-list>
          <ion-item>
            <ion-select placeholder="Sort By" #class
              (ionChange)="sortBy(class.value)" label="Sort By" slot="end">
              <ion-select-option value="class">Class</ion-select-option>
              <ion-select-option value="Habitation">Village</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-list inset="true">
      <ion-accordion-group multiple>
        @for (std of allStudentClassWise ; track std) {
          <ion-accordion value="{{std[0][sortByProperty]}}">
            <ion-item slot="header">
              <ion-chip color="primary">
                <ion-label>{{sortByProperty|uppercase}} : {{std[0][sortByProperty]|titlecase}}{{std[0].length}}</ion-label>
              </ion-chip>
            </ion-item>
            <ion-list slot="content">
              @for (studenfInfo of std; track studenfInfo) {
                @if ( studenfInfo['Status']==='Active' || studenfInfo['Status']==='Y') {
                  <ion-item-sliding>
                    <ion-item-options side="start">
                      <ion-item-option (click)="showModal(studenfInfo)">Detail</ion-item-option>
                    </ion-item-options>
                    <ion-item (click)="showModal(studenfInfo)">
                      <ion-thumbnail slot="start">
                        <img src="{{studenfInfo.Image}}">
                      </ion-thumbnail>
                      <ion-label>{{ studenfInfo.StudentName|titlecase }} </ion-label>
                      <ion-label slot="end">{{ studenfInfo.Habitation|titlecase }} </ion-label>
                    </ion-item>
                    <ion-item-options side="end">
                      <ion-item-option (click)="showModal(studenfInfo)">Detail</ion-item-option>
                    </ion-item-options>
                  </ion-item-sliding>
                }
              }
            </ion-list>
          </ion-accordion>
        }
      </ion-accordion-group>
    </ion-list>
  </ion-grid>
}
@if (!loaded) {
  @if (!gridValue) {
    <ion-grid class="padding-top student-info">
      <ion-row class="student">
        @for (std of [1,2,3,4,5,6]; track std) {
          <ion-col size="12" size-sm="6" size-md="4" size-lg="4">
            <ion-card>
              <div class="image-conatiner">
                <ion-thumbnail slot="start">
                  <ion-skeleton-text [animated]="true"></ion-skeleton-text>
                </ion-thumbnail>
              </div>
              <ion-card-header>
                <ion-card-title>
                  <ion-skeleton-text [animated]="true"></ion-skeleton-text>
                </ion-card-title>
                <ion-card-subtitle>
                  <ion-skeleton-text [animated]="true"></ion-skeleton-text>
                </ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>
                <ion-item>
                  <ion-thumbnail slot="start">
                    <ion-skeleton-text [animated]="true"></ion-skeleton-text>
                  </ion-thumbnail>
                  <ion-label>
                    <h3>
                      <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
                    </h3>
                    <p>
                      <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
                    </p>
                    <p>
                      <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
                    </p>
                  </ion-label>
                </ion-item>
                <div class="action">
                  <ion-button class="ion-activatable ripple-parent" shape="round" color="warning" size="small" [class.button-disabled]="true">Detail
                  </ion-button>
                  <ion-button class="ion-activatable ripple-parent" shape="round" color="warning"
                    [class.button-disabled]="true" size="small">Report
                  </ion-button>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        }
      </ion-row>
    </ion-grid>
  }
  <!-- <ion-list >
  <ion-list-header>
    <ion-skeleton-text [animated]="true" style="width: 80px"></ion-skeleton-text>
  </ion-list-header>
  <ion-item>
    <ion-thumbnail slot="start">
      <ion-skeleton-text [animated]="true"></ion-skeleton-text>
    </ion-thumbnail>
    <ion-label>
      <h3>
        <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
      </h3>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
      </p>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
      </p>
    </ion-label>
  </ion-item>
</ion-list>
<ion-list >
  <ion-list-header>
    <ion-skeleton-text [animated]="true" style="width: 80px"></ion-skeleton-text>
  </ion-list-header>
  <ion-item>
    <ion-thumbnail slot="start">
      <ion-skeleton-text [animated]="true"></ion-skeleton-text>
    </ion-thumbnail>
    <ion-label>
      <h3>
        <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
      </h3>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
      </p>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
      </p>
    </ion-label>
  </ion-item>
</ion-list>
<ion-list >
  <ion-list-header>
    <ion-skeleton-text [animated]="true" style="width: 80px"></ion-skeleton-text>
  </ion-list-header>
  <ion-item>
    <ion-thumbnail slot="start">
      <ion-skeleton-text [animated]="true"></ion-skeleton-text>
    </ion-thumbnail>
    <ion-label>
      <h3>
        <ion-skeleton-text [animated]="true" style="width: 80%;"></ion-skeleton-text>
      </h3>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 60%;"></ion-skeleton-text>
      </p>
      <p>
        <ion-skeleton-text [animated]="true" style="width: 30%;"></ion-skeleton-text>
      </p>
    </ion-label>
  </ion-item>
</ion-list> -->
}

</ion-content>